name = "kivv-automation"
main = "src/index.ts"
compatibility_date = "2024-11-30"
compatibility_flags = ["nodejs_compat"]

# Workers configuration
workers_dev = true

# Cron trigger - runs daily at 6 AM UTC
[triggers]
crons = ["0 6 * * *"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "kivv-db"
database_id = "1e80f2bf-462d-4d51-8002-a4cf26013933"

# R2 Storage binding (for future PDF storage)
[[r2_buckets]]
binding = "PAPERS"
bucket_name = "kivv-papers"

# KV namespace binding (for checkpoints)
[[kv_namespaces]]
binding = "CACHE"
id = "7f6b7437931c4c268c27d01a4169101b"

# Environment variables
[vars]
ENVIRONMENT = "production"
NTFY_TOPIC = "kivv-papers"

# Secrets (set via: wrangler secret put CLAUDE_API_KEY)
# CLAUDE_API_KEY - Set via wrangler secret put
# CRON_SECRET - Optional manual trigger secret (set via wrangler secret put)
